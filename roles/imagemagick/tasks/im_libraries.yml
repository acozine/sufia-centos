---
- name: install IM libraries
  sudo: yes
  yum: name={{ item }} state=present
  with_items:
      - fontconfig-devel
      - freetype-devel
      - libtool-ltdl-devel
      - autoconf
      - automake
      - cmake
      - gcc
      - gcc-c++
      - libtool
      - make
      - mercurial
      - pkgconfig
      - zlib-devel

- name: remove package imagemagick
  sudo: yes
  yum: name=imagemagick state=absent

- name: create IM sources dir
  sudo: yes
  file: owner={{ ansible_ssh_user }} group={{ ansible_ssh_user }} state=directory path={{ magick_path }}

- name: add config for /usr/local/lib to ldconfig
  sudo: yes
  copy: dest=/etc/ld.so.conf.d/usr-local.conf content=/usr/local/lib owner=root group=root mode=0644 
